import{vModelText as F,vModelSelect as j}from"./vue.runtime.esm-bundler-D_x3A6D8.js";import{d as R,r as m,w as H,e as v,c as o,o as r,a as s,b as x,f as A,t as d,F as y,g as k,n as C,h as L,i as V}from"./runtime-core.esm-bundler-Dr1X9nsB.js";const N={class:"data-table"},P={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4"},I={class:"relative"},K={class:"flex items-center gap-2"},T={class:"text-sm text-gray-600"},U={class:"overflow-x-auto rounded-lg border border-gray-200"},E={class:"min-w-full divide-y divide-gray-200"},O={class:"bg-gray-50"},q=["onClick"],G={class:"flex items-center gap-1"},J={key:1,class:"w-4 h-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20"},Q={key:0,class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},W={class:"bg-white divide-y divide-gray-200"},X={key:0},Y=["colspan"],Z={key:1},ee=["colspan"],te={key:0,class:"px-4 py-3 text-right whitespace-nowrap"},se=["onClick"],ae=["onClick"],le={key:0,class:"flex items-center justify-between mt-4"},oe={class:"text-sm text-gray-600"},re={class:"flex items-center gap-1"},ne=["disabled"],ie=["disabled"],de=["onClick"],ue={key:1,class:"px-2 text-gray-400"},ce=["disabled"],ve=["disabled"],be=R({__name:"DataTable",props:{columns:{},data:{default:()=>[]},rowKey:{default:"id"},hasActions:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0}},emits:["edit","delete","row-click"],setup(i,{emit:ye}){const _=i,p=m(""),u=m(""),c=m("asc"),n=m(1),g=m(10);H(p,()=>{n.value=1});const b=v(()=>{let a=[..._.data];if(p.value){const e=p.value.toLowerCase();a=a.filter(t=>_.columns.some(l=>t[l.key]?.toString().toLowerCase().includes(e)))}return u.value&&a.sort((e,t)=>{const l=e[u.value]??"",f=t[u.value]??"";if(typeof l=="number"&&typeof f=="number")return c.value==="asc"?l-f:f-l;const $=l.toString().localeCompare(f.toString());return c.value==="asc"?$:-$}),a}),h=v(()=>Math.ceil(b.value.length/g.value)),w=v(()=>(n.value-1)*g.value),B=v(()=>Math.min(w.value+g.value,b.value.length)),M=v(()=>b.value.slice(w.value,B.value)),S=v(()=>{const a=[],e=h.value,t=n.value;if(e<=7)for(let l=1;l<=e;l++)a.push(l);else{a.push(1),t>3&&a.push("...");for(let l=Math.max(2,t-1);l<=Math.min(e-1,t+1);l++)a.push(l);t<e-2&&a.push("..."),a.push(e)}return a}),z=a=>{u.value===a?c.value=c.value==="asc"?"desc":"asc":(u.value=a,c.value="asc")},D=(a,e)=>{if(a==null)return"-";switch(e.type){case"date":return new Date(a).toLocaleDateString("fr-FR");case"datetime":return new Date(a).toLocaleString("fr-FR");case"money":return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(a);case"boolean":return a?"✓":"✗";default:return String(a)}};return(a,e)=>(r(),o("div",N,[s("div",P,[s("div",I,[A(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),type:"text",placeholder:"Rechercher...",class:"w-full sm:w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[F,p.value]]),e[6]||(e[6]=s("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),s("div",K,[s("span",T,d(b.value.length)+" résultat(s)",1),A(s("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>g.value=t),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm"},[...e[7]||(e[7]=[s("option",{value:10},"10 / page",-1),s("option",{value:25},"25 / page",-1),s("option",{value:50},"50 / page",-1),s("option",{value:100},"100 / page",-1)])],512),[[j,g.value]])])]),s("div",U,[s("table",E,[s("thead",O,[s("tr",null,[(r(!0),o(y,null,k(i.columns,t=>(r(),o("th",{key:t.key,onClick:l=>t.sortable!==!1&&z(t.key),class:C(["px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",{"cursor-pointer hover:bg-gray-100":t.sortable!==!1}])},[s("div",G,[L(d(t.label)+" ",1),t.sortable!==!1?(r(),o(y,{key:0},[u.value===t.key?(r(),o("svg",{key:0,class:C(["w-4 h-4",{"rotate-180":c.value==="desc"}]),fill:"currentColor",viewBox:"0 0 20 20"},[...e[8]||(e[8]=[s("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])],2)):(r(),o("svg",J,[...e[9]||(e[9]=[s("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])]))],64)):x("",!0)])],10,q))),128)),i.hasActions?(r(),o("th",Q," Actions ")):x("",!0)])]),s("tbody",W,[i.loading?(r(),o("tr",X,[s("td",{colspan:i.columns.length+(i.hasActions?1:0),class:"px-4 py-8 text-center text-gray-500"},[...e[10]||(e[10]=[s("svg",{class:"animate-spin h-6 w-6 mx-auto text-blue-500",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),s("p",{class:"mt-2"},"Chargement...",-1)])],8,Y)])):M.value.length===0?(r(),o("tr",Z,[s("td",{colspan:i.columns.length+(i.hasActions?1:0),class:"px-4 py-8 text-center text-gray-500"}," Aucune donnée ",8,ee)])):(r(!0),o(y,{key:2},k(M.value,t=>(r(),o("tr",{key:t[i.rowKey],class:"hover:bg-gray-50 transition-colors"},[(r(!0),o(y,null,k(i.columns,l=>(r(),o("td",{key:l.key,class:"px-4 py-3 whitespace-nowrap"},[V(a.$slots,`cell-${l.key}`,{row:t,value:t[l.key]},()=>[L(d(D(t[l.key],l)),1)])]))),128)),i.hasActions?(r(),o("td",te,[V(a.$slots,"actions",{row:t},()=>[s("button",{onClick:l=>a.$emit("edit",t),class:"text-blue-600 hover:text-blue-800 mr-2"},[...e[11]||(e[11]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,se),s("button",{onClick:l=>a.$emit("delete",t),class:"text-red-600 hover:text-red-800"},[...e[12]||(e[12]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ae)])])):x("",!0)]))),128))])])]),h.value>1?(r(),o("div",le,[s("p",oe," Affichage "+d(w.value+1)+" - "+d(B.value)+" sur "+d(b.value.length),1),s("div",re,[s("button",{onClick:e[2]||(e[2]=t=>n.value=1),disabled:n.value===1,class:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," « ",8,ne),s("button",{onClick:e[3]||(e[3]=t=>n.value--),disabled:n.value===1,class:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," ‹ ",8,ie),(r(!0),o(y,null,k(S.value,t=>(r(),o(y,{key:t},[t!=="..."?(r(),o("button",{key:0,onClick:l=>n.value=t,class:C(["px-3 py-1 rounded border transition-colors",n.value===t?"bg-blue-500 text-white border-blue-500":"border-gray-300 hover:bg-gray-50"])},d(t),11,de)):(r(),o("span",ue,"..."))],64))),128)),s("button",{onClick:e[4]||(e[4]=t=>n.value++),disabled:n.value===h.value,class:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," › ",8,ce),s("button",{onClick:e[5]||(e[5]=t=>n.value=h.value),disabled:n.value===h.value,class:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," » ",8,ve)])])):x("",!0)]))}});export{be as default};
